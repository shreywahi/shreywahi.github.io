const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/driveContentManager-tIfGEpQw.js","assets/google-BCF_8OpS.js","assets/index-D4ib3vmo.js","assets/ui-DTrmruK9.js","assets/vendor-CMmhtoO5.js","assets/utils-ZfQrkrhd.js","assets/themes-pFQOMWgW.js","assets/forms-CiwEs6bv.js","assets/router-C9c491zF.js","assets/index-BZPBjkpm.css","assets/contentLoader-D5A0ezRS.js"])))=>i.map(i=>d[i]);
var e=(e,t,o)=>new Promise(((l,n)=>{var r=e=>{try{a(o.next(e))}catch(t){n(t)}},s=e=>{try{a(o.throw(e))}catch(t){n(t)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);a((o=o.apply(e,t)).next())}));import{d as t,g as o,_ as l}from"./index-D4ib3vmo.js";import{r as n,j as r}from"./ui-DTrmruK9.js";import"./vendor-CMmhtoO5.js";import"./utils-ZfQrkrhd.js";import"./themes-pFQOMWgW.js";import"./forms-CiwEs6bv.js";import"./router-C9c491zF.js";const s=({isAdmin:s,reloadFromDrive:a,saveContentToDrive:i,driveSaving:d,driveMessage:c,screenSize:m="desktop",loadingFromDrive:u,setLoadingFromDrive:g,usingLocalContent:x,setUsingLocalContent:h,onClose:b})=>{const[v,f]=n.useState(!1),[p,C]=n.useState([]);if(n.useEffect((()=>{const e=t();C(e)}),[]),!s)return null;const y=o(),w=p.length>0||window.googleCspBlocked;return"mobile"===m||"tablet"===m?null:r.jsxs("div",{className:"fixed top-8 right-8 z-50 bg-slate-800 text-white p-4 rounded-lg shadow-lg max-w-md",children:["function"==typeof b&&r.jsx("button",{onClick:b,className:"absolute top-2 right-2 text-gray-300 hover:text-red-500 text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-red-400","aria-label":"Close Admin Panel",children:"×"}),r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Admin Content Settings"}),c&&r.jsx("div",{className:"mb-4 p-3 rounded-md "+("error"===c.type?"bg-red-900":"success"===c.type?"bg-green-900":"bg-blue-900"),children:r.jsx("p",{className:"text-sm",children:c.text})}),w&&r.jsxs("div",{className:"mb-4 p-3 bg-red-900 rounded-md",children:[r.jsx("p",{className:"text-sm font-semibold mb-1",children:"⚠️ CSP Issues Detected"}),r.jsx("p",{className:"text-xs",children:"Google Drive access is blocked by Content Security Policy."}),r.jsx("button",{onClick:()=>f(!v),className:"text-xs underline mt-1",children:v?"Hide Fix":"Show Fix"})]}),v&&r.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-md text-xs",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Add this to your HTML head:"}),r.jsx("textarea",{readOnly:!0,value:y.html,className:"w-full h-32 bg-slate-900 text-white p-2 rounded text-xs font-mono"}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(y.html),className:"mt-2 px-2 py-1 bg-blue-600 rounded text-xs",children:"Copy to Clipboard"}),"        "]}),"      ",r.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-md",children:[r.jsx("p",{className:"text-sm font-semibold mb-1",children:"📂 Content Source"}),r.jsxs("p",{className:"text-xs",children:["Currently using: ",r.jsx("span",{className:"font-semibold text-yellow-300",children:x?"Local Files (content.json)":"Google Drive (with local fallback)"})]}),r.jsx("p",{className:"text-xs mt-1",children:x?"Content loads from local files. Switch to Drive mode to sync with Google Drive.":"Content loads from Google Drive first, then falls back to local files if Drive is unavailable."})]}),r.jsxs("div",{className:"mb-4 flex gap-2 flex-row",children:[x?r.jsx("button",{onClick:()=>e(null,null,(function*(){try{const{toggleLocalContentMode:t}=yield l((()=>e(null,null,(function*(){const{toggleLocalContentMode:e}=yield import("./driveContentManager-tIfGEpQw.js");return{toggleLocalContentMode:e}}))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));t(!1),h(!1),window.location.reload()}catch(t){alert("Failed to switch to Drive content: "+t.message)}})),className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm",children:"Switch to Drive Mode"}):r.jsx("button",{onClick:()=>e(null,null,(function*(){try{const{toggleLocalContentMode:t}=yield l((()=>e(null,null,(function*(){const{toggleLocalContentMode:e}=yield import("./driveContentManager-tIfGEpQw.js");return{toggleLocalContentMode:e}}))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));t(!0),h(!0),window.location.reload()}catch(t){alert("Failed to switch to local content: "+(t&&t.message?t.message:JSON.stringify(t)))}})),className:"flex-1 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-md text-sm",children:"Use Local Content"}),r.jsx("button",{onClick:()=>e(null,null,(function*(){try{localStorage.removeItem("cachedContent"),localStorage.removeItem("contentCacheTime"),localStorage.removeItem("useLocalContent");const{resetContentState:t}=yield l((()=>e(null,null,(function*(){const{resetContentState:e}=yield import("./driveContentManager-tIfGEpQw.js");return{resetContentState:e}}))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));t();const{resetDriveMode:o}=yield l((()=>e(null,null,(function*(){const{resetDriveMode:e}=yield import("./contentLoader-D5A0ezRS.js");return{resetDriveMode:e}}))),__vite__mapDeps([10,2,3,4,5,6,7,8,9]));yield o(),localStorage.setItem("loadFromDriveOnStart","true"),window.location.reload()}catch(t){localStorage.setItem("loadFromDriveOnStart","true"),window.location.reload()}})),className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm",children:"Reset Drive Cache & Reload"}),r.jsx("button",{onClick:i,disabled:d||x,className:"flex-1 py-2 rounded-md text-white "+(d||x?"bg-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"),title:x?"Cannot save to Drive while in local content mode":"",children:d?"Saving...":"Save to Google Drive"}),r.jsx("button",{onClick:()=>e(null,null,(function*(){g(!0);try{if(a){if(!(yield a()))throw new Error("Failed to reload content")}else{const{loadContentFromDrive:t}=yield l((()=>e(null,null,(function*(){const{loadContentFromDrive:e}=yield import("./contentLoader-D5A0ezRS.js");return{loadContentFromDrive:e}}))),__vite__mapDeps([10,2,3,4,5,6,7,8,9]));yield t(),window.location.reload()}}catch(t){alert("Failed to load content from Drive: "+t.message)}finally{g(!1)}})),disabled:u||x,className:"flex-1 py-2 rounded-md text-white "+(u||x?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),title:x?"Cannot load from Drive while in local content mode":"",children:u?"Loading from Drive...":"Load Latest from Drive"})]})]})};export{s as default};
